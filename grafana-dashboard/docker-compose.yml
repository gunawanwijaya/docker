version: "3"
networks:
  bridge: { external: true, name: net }
services:
  # --------------------------------------------------------------------------------------------------------------------
  grafana-dashboard:
    container_name: grafana-dashboard
    image:  grafana/grafana-enterprise:latest 
    labels:
      kompose.service.type: nodeport
      kompose.volume.type: configMap
    networks: [bridge]
    ports: [3000:3000]
    # secrets:
    #   - { source: s3host, target: /run/secrets/s3host/s3host }
    #   - { source: s3port, target: /run/secrets/s3port/s3port }
    #   - { source: s3region, target: /run/secrets/s3region/s3region }
    #   - { source: s3bucket, target: /run/secrets/s3bucket/s3bucket }
    #   - { source: s3access, target: /run/secrets/s3access/s3access }
    #   - { source: s3secret, target: /run/secrets/s3secret/s3secret }
    # entrypoint: [sh]
    volumes:
    #   - ./docker-entry.sh:/entrypoint:ro
      - ./provisioning/datasources/datasources.yaml:/etc/grafana/provisioning/datasources/datasources.yaml:ro
      - ./etc.grafana.ini:/etc/grafana/grafana.ini:ro
      - ./../.volume/tmp:/tmp
      - ./../.volume/log:/var/log
    environment:
      - TZ=Asia/Jakarta
  